<?xml version="1.0" standalone="yes"?>
<project basedir="." default="generate">

	<!-- =================================================================== -->
	<!-- Initialisation de toutes les variables                              -->
	<!-- =================================================================== -->
		    	
	<property name="project.dir" value="../../../.." />
	<property name="src.dir" value="${project.dir}/src/main/java" />
	<property name="resource.dir" value="${project.dir}/src/main/resources" />
	<property name="m2repository.dir" value="${user.home}/.m2/repository" />

	<property name="schema.path" value="fr/cls/atoll/motu/processor/opengis/wps" />
	<property name="schema.package" value="fr.cls.atoll.motu.processor.opengis.wps" />
	<property name="schema.xsdpath" value="${resource.dir}/schema/wps100" />
	
	<property name="schema.xsdfile" value="wpsDescribeProcess_response.xsd" />
	<property name="proxy.host" value="proxy.cls.fr" />
	<property name="schema.xjbfile" value="./binding.xml" /> 				
	<path id="classpath">
		<!--
		<fileset dir="${project.dir}/../../../cls-commons-config/lib/jaxb" includes="*.jar" />
		-->
		<!--
		<fileset dir="${m2repository.dir}/org/jvnet/jaxb2_commons/jaxb-xjc/2.1.10" includes="*.jar" />
		<fileset dir="${m2repository.dir}/com/sun/xml/bind/jaxb-xjc/2.1.7" includes="*.jar" />
		<fileset dir="${m2repository.dir}/com/sun/xml/bind/jaxb-impl/2.1.10" includes="*.jar" />
		-->
		
		<fileset dir="${m2repository.dir}/org/jvnet/jaxb2_commons/jaxb-xjc/2.1.10" includes="*.jar" />
		<fileset dir="${m2repository.dir}/com/sun/xml/bind/jaxb-impl/2.1.10" includes="*.jar" />
		<fileset dir="${m2repository.dir}/com/sun/istack/istack-commons-tools/1.1" includes="*.jar" />
		<fileset dir="${m2repository.dir}/com/sun/xml/bind/jaxb-impl/2.1.10" includes="*.jar" />
		<fileset dir="${m2repository.dir}/com/sun/codemodel/codemodel/2.1" includes="*.jar" />
		<fileset dir="${m2repository.dir}/com/sun/xsom/xsom/20081112" includes="*.jar" />
		<fileset dir="${m2repository.dir}/org/kohsuke/rngom/rngom/20061207" includes="*.jar" />
		<fileset dir="${m2repository.dir}/cls/atoll/motu/atoll-motu-processor/2.0.0-SNAPSHOT" includes="*.jar" />
		<!-- <fileset dir="${project.dir}/target/classes/fr/cls/atoll/motu/processor/ant" includes="*.class" /> -->
		
		<!-- <pathelement location="${m2repository.dir}/javax/xml/defaultvalueplugin/1.0/defaultvalueplugin-1.0.jar"/> -->
		<!-- <fileset dir="C:\Downloads\jaxb-ri-20090410\lib" includes="*.jar" /> -->
	</path>

	<!-- 
	<taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask"
	--> 
		<taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask" 
		classpathref="classpath" />
			
	  <target name="probe-proxy">
	    <condition property="proxy.enabled">
	      <and>
	        <isset property="proxy.host"/>
	        <isreachable host="${proxy.host}"/>
	      </and>
	    </condition>
	  </target>

	  <target name="proxy" depends="probe-proxy" if="proxy.enabled">
	    <property name="proxy.port" value="8080"/>
	    <property name="proxy.user" value="dearith"/>
	    <property name="proxy.pass" value="bienvenue"/>
	    <setproxy proxyhost="${proxy.host}" proxyport="${proxy.port}"
	      proxyuser="${proxy.user}" proxypassword="${proxy.pass}"/>
	  </target>

	
	<!-- =================================================================== -->
	<!-- Génération des classes JAVA en utilisant JAXB                       -->
	<!-- =================================================================== -->

	<target name="generate" depends="proxy">
		<!--
		<xjc schema="${schema.xsdfile}" binding="${schema.xjbfile}" target="${src.dir}" package="${schema.package}" removeOldOutput="no">
			<produces dir="${src.dir}" />
		</xjc>
			<xjc  schema="http://schemas.opengis.net/wps/1.0.0/wpsDescribeProcess_response.xsd" destdir="${src.dir}"  target="2.1" binding="${schema.xjbfile}"  removeOldOutput="no">
		-->
		<!-- <schema dir="${schema.xsdpath}" includes="${schema.xsdfile}" /> -->
		 <!-- <xjc  target="${src.dir}"  package="${schema.package}" removeOldOutput="no"> --> 
		<!--
		-->			
		<!--
		<xjc  schema="test.xsd" destdir="${src.dir}"  target="2.1" binding="${schema.xjbfile}"  removeOldOutput="no">
			<arg value="-extension"/>
			   -->

		<xjc  schema="http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd" destdir="${src.dir}"  target="2.1" binding="${schema.xjbfile}"  removeOldOutput="no">
			 <arg value="-extension"/>
				<produces dir="${src.dir}" />
		</xjc>
		

	</target>

	<!-- =================================================================== -->
	<!-- Suppression classes JAVA générées par JAXB                          -->
	<!-- =================================================================== -->

	<target name="clean">
        <delete>
            <fileset dir="${src.dir}/${schema.path}">
				<include name="**/**"/>
            </fileset>
        </delete>
	</target>
	
	
	<!--
	  <target name="declare">
	<taskdef name="mytask" classname="fr.cls.atoll.motu.processor.ant.Expander" 
	classpathref="classpath" />
	  	</target>
	-->
	<!--
	  <target name="main" depends="declare">
	    <mytask message="Hello World! MyVeryOwnTask works!"/>
	  </target>

	-->	


</project>

